<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>
  <body>

    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>

    		<form id="userform">
    			<h3 class="text-success"> Enter username to Join Chat </h3>
    			<input size="45" id="username" type="text" name="user">
    			<input class="btn btn-success" type="submit" name="Join">
    		</form>

    <div class="container">
    	<div id="chat" class="row">
    		<div class="col-md-4">
    		 <h3 class="text-primary"> Online Users</h3>
    			
    		</div>

    		<div class="col-md-8">
    		<div id="txt" style="height: 400px;">
    			<h3 class="text-success">Enter Text Message</h3>
    		</div>

    		<form>
    			<input size="45" id="msg" type="text" name="message">
    			<input class="btn btn-primary" type="submit" name="Send">
    		</form>

    			
    		</div>
    		
    	</div>
    	
    </div>

    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>

	<script>
	$(function(){
		var socket = io();
		$('#chat').hide();
		// socket.emit('new user', "Welcome To Chat Room");
		$('form').submit(function(){
			socket.emit('new message', $('#msg').val());
			$('#txt').append("<p class='text-danger'> " +$('#msg').val()+"</p>")
			$('#msg').val(" ");
			return false;
		});

		$('#userform').submit(function(){
			socket.emit('add user', $('#username').val());
			$('#userform').hide();
			$('#chat').show();
		});

		socket.on('message', function(msg){

			$('#txt').append("<p class='text-success'> " +msg+"</p>")
		});


	});
	  

	</script>
  </body>
</html>
